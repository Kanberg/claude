<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä - SuperPython Game Editor</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body class="editor-body">
    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <header class="editor-header">
        <div class="header-left">
            <a href="index.html" class="logo-small">üêç SuperPython</a>
            <div class="project-name">
                <input type="text" id="projectName" value="–ú–æ—è –∏–≥—Ä–∞" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞">
            </div>
        </div>
        
        <div class="header-center">
            <button class="btn btn-success" id="runBtn" onclick="runGame()">
                ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å
            </button>
            <button class="btn btn-warning" id="stopBtn" onclick="stopGame()" disabled>
                ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
            </button>
            <button class="btn btn-outline" onclick="debugGame()">
                üêõ –û—Ç–ª–∞–¥–∫–∞
            </button>
        </div>
        
        <div class="header-right">
            <button class="btn btn-icon" onclick="saveProject()" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å (Ctrl+S)">üíæ</button>
            <button class="btn btn-icon" onclick="toggleSettings()" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
            <button class="btn btn-icon" onclick="toggleFullscreen()" title="–ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω">‚õ∂</button>
            <a href="profile.html" class="btn btn-icon">üë§</a>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div class="editor-container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –§–∞–π–ª—ã –∏ —Ä–µ—Å—É—Ä—Å—ã -->
        <aside class="sidebar-left">
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="files">üìÅ –§–∞–π–ª—ã</button>
                <button class="sidebar-tab" data-tab="assets">üé® –†–µ—Å—É—Ä—Å—ã</button>
                <button class="sidebar-tab" data-tab="outline">üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞</button>
            </div>
            
            <div class="sidebar-content">
                <!-- –§–∞–π–ª—ã -->
                <div class="tab-content active" id="files-tab">
                    <div class="file-tree">
                        <div class="file-tree-header">
                            <span>–ú–æ–π –ø—Ä–æ–µ–∫—Ç</span>
                            <button class="btn-small" onclick="createFile()">+ –§–∞–π–ª</button>
                        </div>
                        <ul class="file-list" id="fileList">
                            <li class="file-item active" data-file="main.py">
                                <span class="file-icon">üêç</span>
                                <span>main.py</span>
                            </li>
                            <li class="file-item" data-file="player.py">
                                <span class="file-icon">üêç</span>
                                <span>player.py</span>
                            </li>
                            <li class="file-item" data-file="enemy.py">
                                <span class="file-icon">üêç</span>
                                <span>enemy.py</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="examples-section">
                        <h4>üìö –®–∞–±–ª–æ–Ω—ã –∏–≥—Ä</h4>
                        <button class="example-btn" onclick="loadTemplate('snake')">
                            üêç Snake
                        </button>
                        <button class="example-btn" onclick="loadTemplate('platformer')">
                            üèÉ Platformer
                        </button>
                        <button class="example-btn" onclick="loadTemplate('shooter')">
                            üöÄ Shooter
                        </button>
                        <button class="example-btn" onclick="loadTemplate('puzzle')">
                            üß© Puzzle
                        </button>
                        <button class="example-btn" onclick="loadTemplate('rpg')">
                            ‚öîÔ∏è RPG
                        </button>
                    </div>
                </div>
                
                <!-- –†–µ—Å—É—Ä—Å—ã -->
                <div class="tab-content" id="assets-tab">
                    <div class="assets-grid">
                        <div class="asset-item" draggable="true">
                            <div class="asset-preview">üü¶</div>
                            <span>player.png</span>
                        </div>
                        <div class="asset-item" draggable="true">
                            <div class="asset-preview">üü•</div>
                            <span>enemy.png</span>
                        </div>
                    </div>
                    <button class="btn btn-outline full-width" onclick="uploadAsset()">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å
                    </button>
                </div>
                
                <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ -->
                <div class="tab-content" id="outline-tab">
                    <div class="code-outline">
                        <div class="outline-item">üì¶ –ö–ª–∞—Å—Å—ã</div>
                        <div class="outline-item">‚ö° –§—É–Ω–∫—Ü–∏–∏</div>
                        <div class="outline-item">üìå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ -->
        <main class="editor-main">
            <div class="editor-tabs">
                <div class="tab active" data-file="main.py">
                    <span>main.py</span>
                    <button class="tab-close">√ó</button>
                </div>
            </div>
            
            <div class="code-editor-wrapper">
                <div class="line-numbers" id="lineNumbers"></div>
                <textarea 
                    id="codeEditor" 
                    class="code-editor" 
                    spellcheck="false"
                    placeholder="# –ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>
            </div>
            
            <div class="editor-statusbar">
                <span>Python 3.11</span>
                <span>UTF-8</span>
                <span>–°—Ç—Ä–æ–∫–∞ <span id="currentLine">1</span>, –°—Ç–æ–ª–±–µ—Ü <span id="currentCol">1</span></span>
                <span>–°—Ç—Ä–æ–∫: <span id="totalLines">0</span></span>
            </div>
        </main>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - Preview –∏ –∫–æ–Ω—Å–æ–ª—å -->
        <aside class="sidebar-right">
            <div class="preview-tabs">
                <button class="preview-tab active" data-tab="game">üéÆ –ò–≥—Ä–∞</button>
                <button class="preview-tab" data-tab="console">üíª –ö–æ–Ω—Å–æ–ª—å</button>
                <button class="preview-tab" data-tab="debugger">üêõ –û—Ç–ª–∞–¥—á–∏–∫</button>
            </div>
            
            <div class="preview-content">
                <!-- –ò–≥—Ä–æ–≤–æ–µ –æ–∫–Ω–æ -->
                <div class="preview-panel active" id="game-panel">
                    <div class="game-container">
                        <canvas id="gameCanvas" width="800" height="600"></canvas>
                        <div class="game-overlay" id="gameOverlay">
                            <div class="game-overlay-content">
                                <h3>üéÆ –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å" –¥–ª—è –Ω–∞—á–∞–ª–∞</h3>
                                <p>–í–∞—à–∞ –∏–≥—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
                            </div>
                        </div>
                    </div>
                    <div class="game-controls">
                        <div class="game-stats">
                            <span>FPS: <span id="fps">0</span></span>
                            <span>–û–±—ä–µ–∫—Ç–æ–≤: <span id="objects">0</span></span>
                        </div>
                        <div class="game-buttons">
                            <button class="btn-small" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å</button>
                            <button class="btn-small" onclick="screenshotGame()">üì∑ –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                        </div>
                    </div>
                </div>
                
                <!-- –ö–æ–Ω—Å–æ–ª—å -->
                <div class="preview-panel" id="console-panel">
                    <div class="console-output" id="consoleOutput"></div>
                    <div class="console-input-wrapper">
                        <input type="text" id="consoleInput" placeholder=">>> –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..." />
                    </div>
                </div>
                
                <!-- –û—Ç–ª–∞–¥—á–∏–∫ -->
                <div class="preview-panel" id="debugger-panel">
                    <div class="debugger-content">
                        <div class="debug-section">
                            <h4>üìå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</h4>
                            <div id="debugVariables" class="debug-list"></div>
                        </div>
                        <div class="debug-section">
                            <h4>üìç –¢–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞</h4>
                            <div id="debugBreakpoints" class="debug-list"></div>
                        </div>
                        <div class="debug-section">
                            <h4>üìä –°—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤</h4>
                            <div id="debugStack" class="debug-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div class="modal" id="editorSettingsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</h2>
                <button class="close-btn" onclick="toggleSettings()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-grid">
                    <div class="setting-group">
                        <h3>üé® –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h3>
                        <div class="form-group">
                            <label>–¢–µ–º–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</label>
                            <select id="editorTheme">
                                <option value="vs-dark">Dark (VS Code)</option>
                                <option value="monokai">Monokai</option>
                                <option value="dracula">Dracula</option>
                                <option value="github-light">GitHub Light</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
                            <input type="range" min="10" max="24" value="14" id="fontSize">
                            <span id="fontSizeValue">14px</span>
                        </div>
                        <div class="form-group">
                            <label>–°–µ–º–µ–π—Å—Ç–≤–æ —à—Ä–∏—Ñ—Ç–∞</label>
                            <select id="fontFamily">
                                <option value="'Consolas', monospace">Consolas</option>
                                <option value="'Fira Code', monospace">Fira Code</option>
                                <option value="'Monaco', monospace">Monaco</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>‚ö° –ü–æ–≤–µ–¥–µ–Ω–∏–µ</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoSave" checked>
                                –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="livePreview">
                                Live Preview (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="autoComplete" checked>
                                –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="lineNumbers" checked>
                                –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>üéÆ –ò–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫</h3>
                        <div class="form-group">
                            <label>–¶–µ–ª–µ–≤–æ–π FPS</label>
                            <select id="targetFPS">
                                <option value="30">30 FPS</option>
                                <option value="60" selected>60 FPS</option>
                                <option value="120">120 FPS</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ canvas</label>
                            <select id="canvasResolution">
                                <option value="800x600" selected>800x600</option>
                                <option value="1024x768">1024x768</option>
                                <option value="1280x720">1280x720</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="showHitboxes">
                                –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å hitbox'—ã
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveEditorSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn btn-outline" onclick="toggleSettings()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/python-interpreter.js"></script>
    <script src="js/game-engine.js"></script>
    <script src="js/editor.js"></script>
</body>
</html>
